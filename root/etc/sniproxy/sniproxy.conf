
resolver {
	nameserver 1.1.1.1
	mode ipv4_only
}

access_log {
	filename /tmp/access_log.log
	priority notice
}

error_log {
	filename /tmp/error_log.log
}

listener 0.0.0.0:80 {
    protocol http
    table services
}

listener 0.0.0.0:443 {
    protocol tls
    table services
}

table services {

    # Routes for nrk.no
    nrk\.no 172.20.0.4
    nrk.*\.akamaized\.net 172.20.0.4
    nrk.*\.ip-only\.net 172.20.0.4

    # Routes for dr.dk
    dr.*\.akamaized\.net 172.20.0.5
    dr.*\.akamaihd\.net 172.20.0.5
    dr\.dk 172.20.0.5
    dr-massive\.com 172.20.0.5
    
    # Routes for tvplayer.com
    tvplayer\.com 172.20.0.6
    tvplayer-cdn\.com 172.20.0.6

    # Routes for ustvgo.tv
    ustvgo\.tv 172.20.0.6
    ustv24h\.live 172.20.0.6
    stackpathcdn\.com 172.20.0.6 # Perhaps not needed to route entire domain through vpn?

    # Lookup everything else without vpn
    .* *
}
